{"version":3,"sources":["shippypro.svg","components/Header.js","components/Footer.js","axiosIntance.js","logotipo.svg","components/Preloader.js","components/Flights.js","App.js","index.js"],"names":["Header","className","src","logo","alt","Footer","axios","create","baseURL","headers","Authorization","Preloader","Flights","useState","flights","setFlights","isLoading","setIsLoading","airports","setAirports","departure","setDeparture","arrival","setArrival","isSearch","setIsSearch","validation","setValidation","route","setRoute","disableSearch","setDisableSearch","useEffect","a","get","resultFlights","resultAirlines","resultAirport","AirlinesMap","data","reduce","map","item","set","id","name","Map","AirlineResult","Object","assign","airlineName","airlineId","AirportMap","codeIata","AirportResult","departureName","departureAirportId","arrivalName","arrivalAirportId","console","log","getFlights","renameKey","deleteKey","obj","key","oldKey","newKey","forEach","getAirports","numFlights","length","placeholder","isClearable","isSearchable","options","onChange","e","label","onClick","type","sort","b","price","flight","once","height","offset","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3f48fc94.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/shippypro.8f6655a9.svg\";","import logo from '../shippypro.svg';\r\n\r\nexport const Header = () => {\r\n    return (\r\n        <div className=\"header border-gradient-shippypro border-gradient-bottom\">\r\n            <img className=\"logo\" src={logo} alt=\"logo\" />\r\n        </div>\r\n    )\r\n}","export const Footer = () => {\r\n    return (\r\n        <div className=\"footer d-flex justify-content-center\">\r\n            © 2020 Shippypro - Developed by Rosario Mazzacano\r\n        </div>\r\n    )\r\n}","import axios from 'axios';\r\n\r\nexport default axios.create({\r\n  baseURL: 'https://recruitment.shippypro.com/flight-engine/api/',\r\n  headers: {\r\n    Authorization: \"Bearer 1|MN9ruQV0MFEsgOzMo8crw8gB575rsTe2H5U1y2Lj\"\r\n  }\r\n});","export default __webpack_public_path__ + \"static/media/logotipo.e2a6af67.svg\";","import logo from '../logotipo.svg';\r\n\r\nexport const Preloader = () => {\r\n    return (\r\n        <div className=\"preloader\">\r\n            <img className=\"img\" src={logo} alt=\"preloder\" />\r\n        </div>\r\n    )\r\n}","import React, {useState, useEffect} from \"react\";\r\nimport axios from '../axiosIntance';\r\nimport LazyLoad from 'react-lazyload';\r\nimport {Preloader} from './Preloader';\r\n//import {SearchForm} from './SearchForm'\r\n\r\nimport Select from 'react-select'\r\n\r\nexport const Flights = () => {\r\n  const [flights, setFlights] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const [airports, setAirports] = useState([]);\r\n  const [departure, setDeparture] = useState([]);\r\n  const [arrival, setArrival] = useState([]);\r\n  const [isSearch, setIsSearch] = useState(false);\r\n  const [validation, setValidation] = useState(false)\r\n  const [route, setRoute] = useState()\r\n  //const [direct, setDirect] = useState(false)\r\n  const [disableSearch, setDisableSearch] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const getFlights = async () => {\r\n      const resultFlights = route ? await axios.get(`flights/from/${departure}/to/${arrival}`) : await axios.get('flights/all');\r\n      route && setIsSearch(true)\r\n      \r\n      const resultAirlines = await axios.get('airlines/all');\r\n      const resultAirport = await axios.get('airports/all');\r\n      // eslint-disable-next-line\r\n      const AirlinesMap = resultAirlines.data.data.reduce((map, item) => map.set(item.id, item.name), new Map);\r\n\r\n      const AirlineResult = resultFlights.data.data.map((item) => (Object.assign({\r\n        airlineName: AirlinesMap.get(item.airlineId)\r\n      }, item)));\r\n      // eslint-disable-next-line\r\n      const AirportMap = resultAirport.data.data.reduce((map, item) => map.set(item.id, item.codeIata), new Map);\r\n\r\n      const AirportResult = AirlineResult.map((item) => (Object.assign({\r\n        departureName: AirportMap.get(item.departureAirportId),\r\n        arrivalName: AirportMap.get(item.arrivalAirportId)\r\n      }, item)));\r\n\r\n      console.log(AirportResult);\r\n      setFlights(AirportResult);\r\n      setIsLoading(false);\r\n    };\r\n    getFlights();\r\n\r\n    const getAirports = async () => {\r\n      const resultAirport = await axios.get('airports/all');\r\n    \r\n      function renameKey ( obj, oldKey, newKey ) {\r\n        obj[newKey] = obj[oldKey];\r\n        delete obj[oldKey];\r\n      }\r\n      function deleteKey ( obj, key ) {\r\n        delete obj[key];\r\n      }\r\n\r\n      resultAirport.data.data.forEach( obj => renameKey( obj, 'id', 'value' ) );\r\n      resultAirport.data.data.forEach( obj => renameKey( obj, 'codeIata', 'label' ) );\r\n      resultAirport.data.data.forEach( obj => deleteKey( obj, 'latitude' ) );\r\n      resultAirport.data.data.forEach( obj => deleteKey( obj, 'longitude' ) );\r\n      setAirports(resultAirport.data.data);\r\n    };\r\n    getAirports();\r\n    // eslint-disable-next-line\r\n  }, [route]);\r\n\r\n  const handleDeparture = (a) => {\r\n    setDeparture(a.label);\r\n    (departure !== arrival) && arrival.length !== 0 && setValidation(true)\r\n    setDisableSearch(false)\r\n  }\r\n\r\n  const handleArrival = (b) => {\r\n    setArrival(b.label);\r\n     (departure !== arrival) && departure.length !== 0 && setValidation(true)\r\n     setDisableSearch(false)\r\n  }\r\n\r\n  const searchFlight = () => { \r\n      setIsLoading(true)\r\n      setDisableSearch(true)\r\n      setRoute(departure + ' - ' + arrival)\r\n  } \r\n  const numFlights = flights.length\r\n  return (\r\n    <>\r\n  <div className=\"row searchForm\">\r\n    <div className=\"col-md-4 select\">\r\n        <Select\r\n        placeholder={'Departure'}\r\n        isClearable={false}\r\n        isSearchable={true}\r\n        name=\"departure\"\r\n        options={airports} \r\n        onChange={(e) => handleDeparture(e)}\r\n          />\r\n    </div>\r\n    <div className=\"col-md-4 select\">\r\n        <Select\r\n        placeholder={'Arrival'}\r\n        isClearable={false}\r\n        isSearchable={true}\r\n        name=\"arrival\"\r\n        options={airports}\r\n        onChange={(e) => handleArrival(e)}\r\n        />\r\n    </div>\r\n    <div className=\"col-md-4 d-flex justify-content-center align-items-center\">\r\n        {!validation && ( <div className=\"validationSearch\">Select Airport</div> )}\r\n        {validation && ( <button onClick={searchFlight} type=\"button\" className={ disableSearch ? 'btn btn-primary btn-block disabled' : 'btn btn-primary btn-block'}>Search</button> )}\r\n    </div>\r\n    </div>\r\n\r\n  {!isSearch &&  !isLoading && <div className=\"flightMessage d-flex justify-content-center align-items-center flex-column\"><span>All Routes</span> <span>(num. flights: {numFlights})</span></div>}\r\n  {isSearch && !isLoading && <div className=\"flightMessage d-flex justify-content-center align-items-center flex-column\"><span>Route {route}</span> <span>(num. flights {numFlights})</span></div>}\r\n    {isLoading && <Preloader />}\r\n    {!isLoading && flights && (\r\n        flights.sort((a, b) => a.price - b.price).map((flight) => {\r\n          const { id, price, airlineName, departureName, arrivalName } = flight;\r\n         // if (route === (departureName + ' - ' + arrivalName)) {setDirect(true)}\r\n          return (\r\n          <LazyLoad key={id} once={flight.once} height={80} offset={[-80, 0]}>\r\n          <div className=\"row\">\r\n            <div className=\"col-12 card text-center border-gradient border-gradient-shippypro\">\r\n                <div className=\"card-header\">\r\n                    {departureName} - {arrivalName}\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  {/*direct  && <div>direct flight</div>*/}\r\n                  {/*!direct  && <div>stop-overs</div>*/}\r\n                    <h2 className=\"card-title\">{airlineName}</h2>\r\n                </div>\r\n                <div className=\"card-footer\">\r\n                    € {price}\r\n                </div>\r\n            </div>\r\n          </div>\r\n          </LazyLoad>\r\n\r\n          )\r\n                  \r\n        })\r\n      )\r\n    }\r\n    \r\n    </>\r\n  );\r\n}","import './App.css';\nimport {Header} from './components/Header';\nimport {Footer} from './components/Footer';\n//import {SearchForm} from './components/SearchForm';\nimport {Flights} from './components/Flights';\n\nfunction App() {\n  return (\n    <>\n    <Header/>\n    <div className=\"container\">\n      <Flights />\n    </div>\n    <Footer />\n    </>\n  )\n  \n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}